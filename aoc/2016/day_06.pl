#!/bin/perl -w
#
# https://adventofcode.com/2016/day/6

use strict;
use POSIX;
use List::Util qw(reduce);

my $silly_anim = 1;

$| = 1;

print "2016 Day 6\n";
my $puzzle = do { local $/; <DATA> }; # slurp it
my @list = split("\n", $puzzle);

(my ($most, $least)) = recover_message(\@list);
print "P1: The recovered message from highest frequency is $most\n";
print "P2: The recovered message from lowest frequency is $least\n";

sub recover_message {
	my $signal = shift;
	
	my %count = ();
	for (my $i = 0; $i <= $#$signal; $i++) {
		my @char = split('', $signal->[$i]);
		for (my $j = 0; $j <= $#char; $j++) {
			$count{$j}{$char[$j]}++;
		}
	}
	
	my @most =();
	my @least = ();
	foreach my $k (sort keys %count) {
		$most[$k] = reduce { $count{$k}{$a} > $count{$k}{$b} ? $a : $b } (keys %{$count{$k}});
		$least[$k] = reduce { $count{$k}{$a} < $count{$k}{$b} ? $a : $b } (keys %{$count{$k}});
	}
	return join('', @most), join('', @least);
}

__DATA__
wxupppln
ducindyd
rhszlyfu
kouqvpue
nwntizie
feyhuurg
qlgzsmya
svwijujv
tcmsiuly
vyrnynvz
nmidjjxd
ciduttzr
nofnijfo
ghskpifp
yoyvsxct
aqwzgouh
ihhkdayn
lmwyapsl
nxkdwnoq
hdkcvjrr
ecxvdbeg
sfybsvuu
gygvlghh
ivokuftm
grolarfj
tgzpjlca
lojlcrks
bmxogggc
iablmcem
cractnta
mpdrqxea
bdvrqbky
zymlyyyk
dhengvth
vrvvfnoo
ibemygpu
yjetqqrc
yhvpkxxc
rqfzoakw
uihcznsn
blovcrpx
dkrfqpco
xytyahwu
corlghco
gisliobo
qifxxizh
uykqywcf
pfnpbllg
kqcmwcsf
jgfujsse
klmgeozq
gpzgmjfr
vievatyq
rkhlqzgy
ovtopmzu
ahjbkzaw
nvwfxfvb
nqzbysna
brexdapi
jvwutzmq
reoafhkr
aeharbyc
ymvjuqpn
odweptpx
mwfzfgrq
qnbgujqe
jdvavsiv
ufgsatep
utvtvndt
xyonbztr
ouyaeqni
epnaskiv
tqzwxasp
sxudjakj
ppbmajsr
spqcqqad
bulnhjfs
debyqzym
zledocps
hvtwwnim
wuvqjkmt
vixowhlc
synpjwrg
yprcuicv
wlbdrrhu
mhzvzeit
jfrtudaw
ntdgtxbf
mqvkbkha
avzhocnk
rvcnnzlb
ezhvbpxp
bgxeudlr
snncfbun
cceyydvf
ergghyiv
baywxxgm
rluoymdj
hjytmgxb
eivafblf
qotcsomv
zstlpdeo
imqwjhdd
kmlkbwnj
mquzlglq
lrasxxzn
afnrzblr
ljlrzwkv
wiiclwqv
tbammsoi
kitvjdiu
twxhwnvx
qwlrtrmz
nsabmidx
ysqxzaid
qtzxvuow
lpnzibay
fkyfkcwh
goaeengg
jcgyfqjd
avpldldh
lsefwwxg
cbnivbah
znidoakv
oiupmqhs
gzgzxwau
svimmpqp
czjofzkx
slvahvuj
hgghpwzi
qqytgtew
fcdzdijf
wfmyjjjg
oabukfam
bfpyjarh
opjjzuxp
dturiscs
ydzjxijm
ushhlffh
jrhbfhvn
ozjesxqs
psoazeho
czwpexgf
aubbucmc
fekhvfgp
blixqivh
dytoxjks
geipbnaw
fsygumdf
fnqhvkax
wueqmkxb
hjvpeuie
rirgrkxj
lhvunqnh
vxhcgtxy
ljiiqwhv
gmcdnvos
ziwsabrz
zdtgrffn
mwijrxpn
jpuxtkze
bbufxkvy
orbpbvyc
cwboyilk
nkjljrcy
ybdwckjk
iegfymei
pmocypny
tbvbuvrm
uovwjjpt
dzfpixwu
pywzrlzi
gckwatyi
jxapzmew
oeaiivqf
ejtsefkd
njxpqtwu
hgwcbrok
vmmgbadc
mssfzxhn
yhjfmfwu
iylhiddx
stjppdoy
tmtdnked
powalodl
orydpdet
wglrrtmz
cmhxagub
tzuntycz
cnfimria
egklaeoq
rqsjyvck
ixizedid
pbmrgvge
ggpasnuz
mmsxlhsg
iazvwofl
xdbigytq
hdubbpsh
yfuktmiv
qenfqhhq
dyknyhyr
tehlplwl
msxxytnl
mzzibilg
ekndtqhx
nrqgcebz
kxpoopht
uknlrvsq
tksvulfn
bzaerzkd
elzunecg
wqodfhhl
qarirobh
lbdihftv
jedokhkc
zoryeegh
hceufcgx
ivwexljx
tecynrtk
uludfkpg
ubnvcadx
tufdeiko
fhlgwysq
qkgecunv
nkhpoefm
vajmrmbj
mxbhzhij
zxknrpfa
izijmrgl
fhdecewz
nerazpwu
jpusqgni
cycyeavi
vdilxqje
ldsqnfam
dkqkfobn
ctlrvsbr
bkmfpzbe
fdklbgrf
cjjxzzlo
zjgotpci
jsekrolb
xudoqzpy
khzyxudb
pgfxhbwp
ghhqdkhc
bszyorop
qoctnrcu
zntexpro
yqtwijxo
ufgoduva
rfmvokel
izxdabdu
jjlcytsp
sqbzxmei
lbmfqhmk
iqugozxv
gqkerurs
obauqiol
vjiavpjg
xwifisoa
lgdsybve
ncktlbws
baaehiyx
kyxrplga
keeyjwjr
kfwsrsmy
obibcmpe
dvjjhtut
ocezenxs
vxswiuwj
moiacpci
tzougogf
jaldounz
jlsckwfb
dqnlxeua
aprfnbjb
btracexv
yirdccur
yilvotby
qjokslpd
tdxcpyrf
mebacfie
bxcgholo
zsjnmohj
rooztfuf
rowmbvgp
mneowyhw
qovodyoj
lgsoucpt
rnfupvcq
izgskidy
oxjjtsfm
hgdhcrzz
fbhkdukc
ofejcggd
fygdulih
qgycsnfp
yshnipvg
olwjdrxj
ijehiskz
anekcijz
ygsmtmun
nvytgoej
xxotdtic
eadmjgqy
mcnzfctc
nxcewnpp
ezsuldpm
aspbbhtr
absngjpy
bbjmxzvb
xdchcqbt
vskvdrmw
fbxwizhb
icmbajue
rqnbgeqq
friivchk
zwlqorza
tuuvdiqx
dvjyseai
zkixqvgt
qirzbtte
nwgtodef
hjgnilug
pmyrvary
pdoncpni
xdbuvkio
exdagchd
tmchwgzn
xgqriqne
hlnmloew
uqdjxgmt
ulaxldqc
kkaevjap
bxdqwdzt
soaclkqq
jqoqjwxw
vrlyksim
rapqania
adhkvmur
ryowhvbx
hcxtiwqk
jpikhedh
hdosvskq
vtskhlbv
xpykokqp
oxlenmhg
utjipbaw
xyqpsonc
frqgvezn
cijiklxw
xwsxtrcf
odareemq
derdtuxx
xopbgasq
kuzipuhf
eptbpoos
jtesgetv
vvqcxymr
wvmtuolf
avejonoy
wfwizbag
srplbnvs
gbkrhhsd
xupwhjjh
glztwxno
yyapmumi
hzcladvm
tqdyexyo
egsisfti
pjwrpcrl
zwigknsv
vnthscff
wnqggfbd
ihvysqha
wypfzkzu
cjjuwjef
yoraozqu
hrlphdth
vhyxlkdn
cgpzbsad
gfxnhjnj
kmthfrrc
ghgrjjud
bupqueob
nckvualr
qezqfqyo
fucsogtm
zcxhypdi
fxmjpddm
zsuvvyvt
klpsmvxe
aukywwyb
etbmrtvo
uxggmylj
qlptnyyb
awfxrlqk
qfiuksln
xmsuzsab
upzskbax
ejhlazkn
aspugswh
stfdbhna
kgnhzfwa
anbocatp
zsqfnlkl
mnkbtygk
muywfyze
vufematv
rjnravbb
qufwwqml
stgxdcrs
dotmpgqk
mpjgmlgn
nnbgfgbi
paqsvfuu
taqszxqw
lfemniuk
hnfqekvl
ddarkfez
iatzsfjg
gjbyfwoh
unebqbgq
eysosujo
smsklhaj
gczwketm
halhdycw
eccopazl
wjguoavc
nxffamig
qtaunyfg
cqvlyrhw
ktcnhgmy
srcwxxfe
wwjqduvj
jgwjrbct
persltzk
bijmwdsv
faqetgtt
mwpkdibg
kblrtgvk
iaxjyqaz
akvwlvkc
wngzqcmc
lzrmhunp
ibzpkhia
drqasqzz
ycmsgmot
tthiqsnt
pnmqmyyb
whbmhcaf
payffzst
vnmbdrfs
okftnixy
mlwwecbs
pxutbxdw
gbtjmosd
wlffksko
fidktsnm
ynkbzzyz
zrrcndqk
fppfsayu
sprbqnvy
dldjkbjf
pzkzptbg
hkfihnfz
vpqexioj
pgdarlwr
ywfhgmcy
xtcepwtx
pstjdxgc
subqgesj
rzcsmqcu
ecamlyqr
kmmtswus
ivasccbd
hftmycez
dcqnymdw
ruzghmqr
nkkgiamm
ysnwdqdi
amaezxgi
lgrdaimp
uwmrkqnl
trmrubbx
xonawvml
piynnxqn
fvrikggm
rindzfup
edoparoq
rfdnetab
oavtacxp
lwhqmzpk
ehcwrdru
ctgetlui
bctqhqlo
wrxxlmjk
uwhwjaps
jelhsowr
cbwowzwy
stqkyeqh
aypkelrt
comebmmj
geqllpks
sfdontwl
hppmvkyl
vuktowpp
ocoievzs
haxkfyjc
dhluejeb
wzixgwts
symyqsna
iuxrcerk
pzfqujow
urccnfyo
lwovilmr
lmpjjhwv
akobwxtn
tqbquptz
xkuzlhwz
waktkczt
kvyccfrb
wvhhelfl
vtujfdyl
lfhaepja
znlbuosa
jtmvruzq
dwzxsnpx
qhxmuwde
claqvmel
jjejbywd
zkxftxlw
zixnwvjk
mhsvljsj
fdyukgpx
kevizule
dkuyxtsm
rpondvew
xzwxowwe
uaqpjocu
xfysjhbz
kmcookjd
lkvcisxx
xsluniob